machine:
    node:
        version: 0.10.22
    environment:
        CODECLIMATE_REPO_TOKEN: a3d17e89ce9838fc779c7b88522cc25db043e31d1529ff9b17d11b26509d00df
    pre:
        - source ~/.rvm/scripts/rvm
        - rvm use 1.9.3

checkout:
    post:
        - cp app/scripts/constants-test.js app/scripts/constants.js

dependencies:
    pre:
        - npm install -g bower grunt-cli
        - rvm install ruby-1.9.3-p551
        - gem install compass
        - npm install

test:
  post:
      - npm install -g codeclimate-test-reporter
      - codeclimate-test-reporter < coverage/lcov/lcov.info

deployment:
  master:
    branch: master
    commands:
      - grunt upload --email=$IONIC_UPLOAD_EMAIL --password=$IONIC_UPLOAD_PASSWORD
      - npm install -g cordova
      - npm install -g ionic
      - ionic platform add android
      - grunt build:android
      - cp platforms/android/build/outputs/apk/android-debug.apk $CIRCLE_ARTIFACTS
      
