<ion-view ng-init="initCtrl()" hide-back-button="true" cache-view="false">
  <ion-nav-buttons side="primary" >
    <button class="button button-icon icon ion-gear-a" ui-sref="app.settings"></button>
  </ion-nav-buttons>
  <ion-nav-title>
    {{ 'orders' | translate }}
  </ion-nav-title>
  <ion-nav-buttons side="secondary" >
    <button class="button button-icon icon ion-bag" ui-sref="app.orders"></button>
  </ion-nav-buttons>

  <ge-loading-backdrop ng-show="loadingBackdrop.show">
  </ge-loading-backdrop>

  <ion-content class="has-footer has-header" ng-hide="messageBackdrop.show || loadingBackdrop.show">

    <button id="new-order-button" class="button button-assertive center" on-tap="onNewGroupOrder()">
      {{ 'newOrder' | translate }} !
    </button>

    <ion-refresher pulling-text="Pull to refresh..." on-refresh="onRefreshGroupOrders()">
    </ion-refresher>

    <md-list>
      <md-list-item ng-repeat="groupOrder in groupOrders" on-tap="onJoinOrderTouch(groupOrder)">
        <md-item-content class="go-divider-header">
          <md-toolbar class="go-list-header">
            <span class="list-title"> <i class="italic">{{ 'pizzeria' | translate }} </i>: {{ groupOrder.restaurant.data.name }} </span>
          </md-toolbar>

        </md-item-content>
        <md-item-content layout="row" layout-wrap class="go-details-list">

            <div flex="50">
              <div class="go-details"> {{ 'remainingCapacity' | translate }} {{ groupOrder.remainingCapacity }}
              </div>

            </div>

            <div flex="25" class="center">
              <i class="ion-arrow-graph-down-right assertive go-icon"></i>
              <b class="go-discount"> {{ groupOrder.discountRate }}%</b>
            </div>

            <div flex="25" class="center">
              <i class="ion-android-stopwatch assertive go-icon"></i>
              <b class="go-chrono"><timer countdown="getTimeDiff(groupOrder.endingAt)" max-time-unit="'minute'" interval="1000" id="chrono-syle"> {{mminutes}}:{{sseconds}} </timer></b>
            </div>
        </md-item-content>


        <md-divider class="go-divider"></md-divider>
      </md-list-item>
    </md-list>

  </ion-content>

  <ion-content class="has-footer has-header" scroll="false" ng-show="messageBackdrop.show">
      <ge-message-backdrop>
      </ge-message-backdrop>
  </ion-content>

  <!--
  Pour le futur bouton flottant swag

  <div class="float-button">
    <span class="height-fix">
      <a ui-sref="add-trip" class="content">
        <i class="ion-plus-round"> </i>
      </a>
    </span>
  </div> -->

</ion-view>
