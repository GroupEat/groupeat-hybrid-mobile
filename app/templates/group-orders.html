<ion-view ng-controller="GroupOrdersCtrl" view-title="{{ 'orders' | translate }}" hide-back-button="true" cache-view="false">

  <ion-content class="has-footer has-header" ng-show="!messageBackdrop.show">

    <button id="new-order-button" on-tap="onNewGroupOrder()" class="button button-full button-outline no-margin">
      <text id="new-order-text">{{ 'newOrder' | translate }} !<text/>
    </button>

    <ion-refresher pulling-text="Pull to refresh..." on-refresh="onRefreshGroupOrders()">
    </ion-refresher>

    <div ng-repeat="groupOrder in groupOrders.data">
      <div class="card">

        <div class="item item-divider">
          <i class="ion-clock assertive"></i>
          <b><timer countdown="getTimeDiff(groupOrder.endingAt)" max-time-unit="'minute'" interval="1000">{{mminutes}}:{{sseconds}} </timer></b>
          <i class="ion-cash assertive"></i>
          <b>{{ groupOrder.discountRate }}%</b>
        </div>

        <div class="item item-text-wrap">
          <h2>{{ 'pizzeria' | translate }} : {{ groupOrder.restaurant.data.name }}</h2>
          <div> {{ 'remainingCapacity' | translate }} {{ groupOrder.remainingCapacity }}</div>
        </div>
        <a class="item item-icon-left assertive" on-tap="onJoinOrderTouch(groupOrder)">
          <i class="icon ion-arrow-right-a"></i>
          {{ 'joinThisOrder' | translate }} !
        </a>
      </div>
    </div>

    <div ng-hide="!isGroupOrdersEmpty">
      <span> {{ 'noGroupOrder' | translate }} </span>
    </div>

  </ion-content>

  <ion-content class="has-footer has-header" scroll="false" ng-show="messageBackdrop.show">
    <ge-message-backdrop>
    </ge-message-backdrop>
  </ion-content>

  <!--
  Pour le futur bouton flottant swag

  <div class="float-button">
    <span class="height-fix">
      <a ui-sref="add-trip" class="content">
        <i class="ion-plus-round"> </i>
      </a>
    </span>
  </div> -->

  <ion-tabs id="bottom-tabs" ng-controller="BottomTabsCtrl" class="tabs-energized tabs-icon-top">
        <ion-tab ng-repeat="tab in bottomTabs" title="{{ tab.title | translate }}" icon-on="{{ tab.iconClasses }}" icon-off="{{ tab.iconClasses }}" ui-sref="{{ tab.stateTarget }}">
        </ion-tab>
  </ion-tabs>

</ion-view>
